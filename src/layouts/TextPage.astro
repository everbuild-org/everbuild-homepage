---
import BaseOf from "./BaseOf.astro";
---
<BaseOf>
    <main class="container mx-auto p-4 md:p-8">
        <section class="mb-16">
            <div class="bg-white border-4 border-black rounded-lg p-8 md:p-12 hard-shadow dark:bg-neutral-900 dark:border-neutral-700 relative">

                <div class="flex flex-col sm:flex-row justify-between gap-4 mb-8 md:absolute md:top-8 md:right-8">
                    <div />
                    <div id="lang-selector" class="flex">
                        <button class="mt-auto font-bold text-lg text-center p-3 rounded-tl-lg rounded-bl-lg border-4 border-r-2 border-black hard-shadow btn-hover transition-all duration-150 uppercase btn-grp-active" data-lang="en">English</button>
                        <button class="mt-auto font-bold text-lg text-center p-3 rounded-tr-lg rounded-br-lg border-4 border-l-2 border-black hard-shadow btn-hover transition-all duration-150 uppercase btn-grp-inactive" data-lang="de">German</button>
                    </div>
                </div>

                <div class="content">
                    <slot/>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const langSelector = document.getElementById('lang-selector');

            if (langSelector) {
                const langButtons = langSelector.querySelectorAll('button[data-lang]');
                const langContents = document.querySelectorAll('.lang-content');

                langSelector.addEventListener('click', (event) => {
                    const clickedButton = (event.target as HTMLElement).closest('button[data-lang]') as HTMLButtonElement;

                    if (!clickedButton) return;

                    const targetLang = clickedButton.dataset.lang;

                    langButtons.forEach(button => {
                        button.classList.remove('btn-grp-active');
                        button.classList.add('btn-grp-inactive');
                    });

                    clickedButton.classList.add('btn-grp-active');
                    clickedButton.classList.remove('btn-grp-inactive');


                    langContents.forEach(content => {
                        content.classList.remove('active');
                    });

                    const targetContent = document.getElementById(`lang-${targetLang}`);

                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                });
            }
        });
    </script>
</BaseOf>
